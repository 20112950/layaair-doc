# SWF animation used in the LayaAir engine

### 1. LayaAir engine using SWF animation prerequisite

In order to support the rapid migration from Flash to HTML5 projects, the LayaAir engine provides a SWF file conversion tool that converts the native SWF file into a format recognized by the LayaAir engine. But the conversion tool does not support **content of text, special shape masks, SWF file Gradient, code in such special content**. If you include the above content, the conversion will not be able to achieve the original SWF effect or conversion failure.



> If developers are not familiar or not necessary with their project to link with Flash and SWF animation file production and export-related knowledge, do not have to continue to read this article. Use LayaAir IDE tool to create animation content.
>



### 2. Convert the SWF animation to the format recogni	zed by the LayaAir engine

Prepare an animated file that conforms to the SWF conversion specification, and then open the design pattern of LayaAirIDE.

Select the menu `tool ` --> `SWF conversion` to open the SWF conversion tool panel, as shown in Figure 1.

![图1](img/1.png) 

(Picture 1)

In the newly opened `SWF conversion` panel, as shown in Figure 2, drag the conform  SWF animation or folder specification to apply the conversion.

![动图2](img/2.gif)  

(Picture 2)

Click to `start the conversion`, as shown in Figure 3. The default will be in the swf directory to generate as an `output` directory, successful conversion will generate a new SWF file in the output . Will generate a new swf and Atlas files, as well as a picture folder(check the packaged atlas option, the pictures folder not, non atlas mode only).

![动图2](img/3.gif)   



(Picture 3)

**Tips**：

- If it is complex, the SWF file generates multiple bitmaps, so it is recommended to start before the `conversion` whethers an atlas before starting the `conversion package` .

- Default generated in the output directory. Developer can enter the path bar, and click `Change` to modify the output directory.


- The new SWF generated by the conversion tool cannot be converted again.

  ​



### 3. The use of converted swf animation

#### 3.1 Copy the converted swf resource to the project

Before using the swf animation, we will first copy the tool to generate the `.swf` format files and assembly `Atlas file` copied to the project's resource directory (in this case the res/swf/ directory under the project root), as shown in figure 4.

![图4](img/4.gif)  

(pictures 4)

**Tips**：

- The folder in Figure 4 does not need to be copied according to the operations in this example. If you do not use the atlas method, you will only generate a SWF and a picture resource folder, then you need to copy the folder.
- Note that LayaAirIDE does not support folder drag copy. If you copy folders, you need to open the system's resource manager, copy and paste in the system.



#### 3.2  Understanding the API for playing swf animation: MovieClip

Using the converted SWF animation in the LayaAir engine, you need to use the **MovieClip类**, API description shown in Figure 5, API link: [https://layaair.ldc.layabox.com/api/index.html?category=Core&class=laya.ani.swf.MovieClip](https://layaair.ldc.layabox.com/api/index.html?category=Core&class=laya.ani.swf.MovieClip)

![图5](img/5.png) 

(Picture 5)

#### 3.3 Use code to achieve SWF animation playback

An example of playing SWF animation, as shown in the following code:

Entry class MovieClipSample.ts

```typescript
module LayaDEMO { 
{
  	import MovieClip = Laya.MovieClip;
	
	export class MovieClipSample 
	{
		
		constructor() 
		{
			//初始化舞台
			Laya.init(1334, 750);
			
			//创建一个 MovieClip 实例
			var mc:MovieClip = new MovieClip();
			
			//加载swf资源,load方法的第二个参数不设置为散图模式加载，设置为true是采用图集方式加载。
			mc.load("res/swf/monkey.swf",true);
			
			//添加到舞台
			Laya.stage.addChild(mc);

		}
	}
}
```
