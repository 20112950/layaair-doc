# Make and use bitmap fonts



​         Used Starling or Cocos, or even Unity, we must not unfamiliar bitmap fonts, simple picture, into the custom text, you can make a good text display in the project effect. The LayaAir also supports the use and display of bitmap fonts. The following is the use of bitmap fonts in LayaAir.

 

### Make bitmap fonts

​        1. The text to be used for export is written in a TXT file
​        ![图片1.png](http://ldc.layabox.com/uploadfile/image/20160518/1463538920512897.png)

​        2. Select File -> Save as Unicode-encoded txt file.
​        ![图片1.png](http://ldc.layabox.com/uploadfile/image/20160518/1463538942170528.png)

​        3. Download and install Windows free bitmap font production tools under Bitmap Font Generator.
​        Download address：[http://www.angelcode.com/products/bmfont/](http://www.angelcode.com/products/bmfont/install_bmfont_1.13.exe)

 

​        4.Open the software, select Option-> FontSetting,set the general settings for the fonts that need to be exported, click OK after setting the button to save.

![blob.png](http://ldc.layabox.com/uploadfile/image/20170104/1483527761311236.png)        
**Important parameter description: **

​        Font: the font used to export bitmap fonts.
​        Size: sets the font size used for exporting bitmap fonts. It is recommended that you use the same size when you display it.
​        Height: set the font's drawing height and keep the default 100%.
​       * Note: selects Unicode value for Charset.*

​        ![图片1.png](http://ldc.layabox.com/uploadfile/image/20160518/1463538956945255.png)

​        5. Select in menu bar Edit-> Select chars from file, and choose the txt file just created. if have a failed prompted alert, please check whether the txt file is unicode encoded file and the text contains the font.

​        ![图片1.png](http://ldc.layabox.com/uploadfile/image/20160518/1463538965101975.png)

​        6. To set export styles, select Options->Export Options in the menu bar, open Export Options, set export options, and then click the OK button to save.

​        Padding: the inner border of text, or text to understand the surrounding blank much. This property is important when posting styles, and you need to reserve space for use with strokes, luminous effects, and so on. For example, it is expected to add a 2px border, and then add a lower right corner 2px projection, so set the padding:2px 4PX 4PX 2px.
​        Bit depth: must be 32 bits, otherwise there is no transparent layer.
​        Presets:  font settings initialization of the default color channel.
​        Font descriptor: font description file, select xml.
​        Textures: texture picture format, select png.

​        ![图片1.png](http://ldc.layabox.com/uploadfile/image/20160518/1463538975736762.png)
​        7. To export the bitmap font. Select in menu bar  Options-> Save bitmap font as ..., export is generated by a font description file (.fnt format) and a font texture file (.png format).

 

### Use bitmap fonts in the LayaAir project

​        1. put the resources in the output directory of the project.
​        Modify the exported bitmap file the same name (.fnt file and .png file) and place it in the bin / h5 directory of the LayaAir project.

​        ![1.png](http://ldc.layabox.com/uploadfile/image/20160627/1467013751154102.png)

​        Picture: change the name of test_0.png to test.png, to ensure that the same name with the fnt file. Then put the test.png and test.fnt files under the H5 directory.

 

**Bitmap fonts are generalely used in the LayaAir project:**

1. Create a bitmap font object.

2. Load the bitmap font and follow for completion.

3. register bitmap fonts.

4. use fonts.

The following is a complete example implementation.      

![blob.png](http://old.ldc.layabox.com/uploadfile/image/20170104/1483538174403712.png)

The complete code is as follows:

```typescript
class LayaSample {
    //自定义文件名称
    private mFontName:string = "diyFont";
    private mBitmapFont:Laya.BitmapFont;
    constructor() {
        //初始化引擎
        Laya.init(550,400);
        this.mBitmapFont = new Laya.BitmapFont();
        //这里不需要扩展名，外部保证fnt与png文件同名
        this.mBitmapFont.loadFont("res/bitmapFont/test.fnt",new Laya.Handler(this,this.onLoaded));
    }
    private onLoaded():void{
        this.init();
    }
    private init():void{
        //如果位图字体中，没放空格，最好设置一个空格宽度
        this.mBitmapFont.setSpaceWidth(10);
        Laya.Text.registerBitmapFont(this.mFontName,this.mBitmapFont);
        var txt:Laya.Text = new Laya.Text();
        txt.text = "这是layabox测试文件";
        //设置宽度，高度自动匹配
        txt.width = 250;
        //自动换行
        txt.wordWrap = true;
        txt.align = "center";
        //使用我们注册的字体
        txt.font = this.mFontName;
        txt.fontSize = 50;
        txt.leading = 5;
        Laya.stage.addChild(txt);
    }
}
new LayaSample();
```

### **Text related interface in the class: **

 **registerBitmapFont () method**  

 public static function registerBitmapFont(name:String, bitmapFont:BitmapFont):void

 Registered bitmap font.

 Parameter

​     name:String - the name of the bitmap font.  
​     bitmapFont:BitmapFont - Bitmap font file 

 

**unregisterBitmapFont () method ** 

 public static function unregisterBitmapFont(name:String, destory:Boolean = true):void

 Remove the registered bitmap font file.

 Parameter

​     name:String - The name of the bitmap font.    
​     destory:Boolean (default = true) - whether to destroy the current font file.

  

### BitmapFont related interfaces in the class :

 **loadFont () method ** 

 public function loadFont(path:String, complete:Handler):void

Loads bitmap font files by specifying bitmap font file paths.

 parameter
​     path:String - The path to the bitmap font file       
​     complete:Handler - Load the completion of the callback, notify the upper font file has been completed to load and parse.

 

**parseFont () Method ** 

 public function parseFont(xml:XmlDom, texture:Texture):void

 Parse the font file.

 parameter

​     xml:XmlDom - Font file XML
​     texture:Texture - Font texture

 

 

**destory ()  Method**

 public function destory():void

Destroy bitmap fonts and destroy them by default when calling Text.unregisterBitmapFont.

  

**setSpaceWidth () Method **

 public function setSpaceWidth(spaceWidth:Number):void

 Set the width of the space (if the font library has spaces, it can be set aside).

 Parameter

​     spaceWidth:Number - width, unit in pixels.

 

  

### Using bitmap fonts in LayaAir IDE

 1. Place the font file in the resource directory of the LayaAir IDE project (laya / assets /),  ensure that both file names are same, such as test.fnt and test.png. This will automatically registers a bitmap font called test.

![图片12.png](http://ldc.layabox.com/uploadfile/image/20160701/1467381250863605.png)

2. Set the font property value of the text component will modify bitmap font attributes, located in the import editor.

![图片13.png](http://ldc.layabox.com/uploadfile/image/20160701/1467381279857087.png)

3. Before instantiate program code that uses a bitmap font, you need to create and register the bitmap font used in the page.

 
